/*
 * Flocking MIDI Demos: Node.js Ports View
 * http://github.com/colinbdclark/flocking-midi
 *
 * Copyright 2016, Colin Clark
 * Licensed under the MIT license.
 */

"use strict";

var fluid = require("infusion"),
    flock = fluid.registerNamespace("flock");

require("console.table");

fluid.defaults("flock.midi.demos.portsView", {
    gradeNames: "fluid.modelComponent",

    modelListeners: {
        ports: {
            funcName: "flock.midi.demos.portsView.logAllPorts",
            args: ["{system}"]
        }
    }
});

flock.midi.demos.portsView.logAllPorts = function (system) {
    // TODO: This should be defined as a set of model relays from
    // the system's base ports model!
    var inputs = fluid.values(system.inputs()),
        outputs = fluid.values(system.outputs());

    flock.midi.demos.portsView.logTable("Inputs", inputs);
    flock.midi.demos.portsView.logTable("Outputs", outputs);

    console.log("\n");
};

flock.midi.demos.portsView.logTable = function (title, arr) {
    if (arr.length < 1) {
        console.log(title + "\n-------\nNone connected.\n");
    } else {
        console.table(title, arr);
    }
};
