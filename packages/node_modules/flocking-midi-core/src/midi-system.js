/*
 * Flocking MIDI Core System
 * http://github.com/colinbdclark/flocking-midi
 *
 * Copyright 2014-2016, Colin Clark
 * Licensed under the MIT license.
 */

"use strict";

var fluid = fluid || require("infusion");

/**
 * A MIDI System component represents a system of MIDI device ports
 */
fluid.defaults("flock.midi.system", {
    gradeNames: "fluid.modelComponent",

    sysex: false,

    model: {
        inputs: {},
        outputs: {}
    },

    components: {
        access: {
            type: "flock.midi.access"
        }
    },

    invokers: {
        requestAccess: "{that}.access.requestAccess()",
        refreshPorts: "{that}.events.onRefreshPorts.fire"
    },

    events: {
        onReady: "{access}.events.afterAccessGranted",
        onRefreshPorts: null
    }
});
